function ajaxFormSubmit(b){var e="";var a="";var f=$(b.target).closest(".subscribe-box");$.each(f.find(".ui-checkbox"),function(j,h){var g=$(h).find('input[type="checkbox"]').attr("name");var i=$(h).find("label").hasClass("ui-checkbox-on")?1:0;if(e){a="&"+g+"="+i}else{a="?"+g+"="+i}e=e+a});e=e+"&hermesID="+f.find('input[name="hermesID"]').val();var c={url:"/ajaxBookSubscribe"+e,before:showLoader,success:d,complete:hideLoader,error:ajax_error};sendAjaxRequest(c);function d(g){if(g.response===0){popOver("恭喜！成功了yeah～")}if(g.response===1){popOver("Sorry，稍后再试下嘛！")}if(g.response===2){popOver("请先添加接受报警方式后再订阅！")}if(g.response===3){popOver("订阅成功，记得打开接收报警选项哦～")}}}function ajaxGetSubDetail(d){var a=d;var b={url:"/ajaxGetSubDetail?group="+a.attr("data-name"),before:showLoader,success:c,complete:hideLoader,error:ajax_error};sendAjaxRequest(b);function c(f){var g="",e=0;if(f.subDetail!=null&&f.subDetail.length>0){g='<div class="subscribe-box"><fieldset data-role="controlgroup">';$.each(f.subDetail,function(i,h){if(h.level==1){g=g+'<label for="'+h.name+'" style="color:orange">'+h.name+'<p style="display:inline">&nbsp级别低</p>'}else{if(h.level==3){g=g+'<label for="'+h.name+'" style="color:red">'+h.name+'<p style="display:inline">&nbsp级别高</p>'}else{g=g+'<label for="'+h.name+'">'+h.name}}if(h.alias){g=g+'<p style="display:inline"> '+h.alias+"</p></label>"}else{g=g+"</label>"}if(h.booked){g=g+'<input type="checkbox" name="'+h.name+'" id="'+h.name+'" checked="checked">'}else{g=g+'<input type="checkbox" name="'+h.name+'" id="'+h.name+'">'}});g=g+"</fieldset>";g=g+'<input type="hidden" name="hermesID" value="'+a.attr("data-name")+'">';g=g+'<input type="button" onclick="ajaxFormSubmit(event)" value="提交选择"></div>';e=1}else{g="<p>无法获得订阅信息!</p>"}a.find(".content").html(g).trigger("create");if(Panel){Panel.openSMT(a)}}};